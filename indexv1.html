<!DOCTYPE html>
<html>
  <head>
    <title>建筑模拟</title>
    <style>
      body,
      html {
        font-family: Arial, sans-serif;
        margin: 0;

        /* 深蓝到浅蓝的渐变色 */

        background: linear-gradient(to bottom, #0047ab, #87ceeb);

        width: 100%;
        height: 100%;

        /* color: #ffffff; */
      }

      .building {
        display: inline-block;
        margin: 20px;
        border: 1px solid #000;
        text-align: center;
        vertical-align: bottom; /* 底部对齐 */
      }

      .floor {
        background-color: #ddd;
        padding: 10px;
        border-bottom: 1px solid #000;
      }

      .window {
        display: inline-block;
        width: 20px;
        height: 20px;
        background-color: lightblue;
        margin: 5px;
        border: 1px solid #000;
        position: relative;
      }

      /* 窗口的样式  田字样式*/

      .window::before,
      .window::after {
        content: "";
        position: absolute;
        width: 100%;
        height: 2px;
        background-color: #000;
      }

      .window::before {
        top: 50%;
        left: 0;
        transform: translateY(-50%);
      }

      .window::after {
        top: 0;
        left: 50%;
        height: 100%;
        width: 2px;
        transform: translateX(-50%);
      }

      .building-label {
        font-size: 12px;
        margin-top: 5px;
        color: #fff;
        margin: 20px;
      }

      body {
        text-align: center; /* 水平居中对齐建筑 */
      }

      .popup {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }

      .popup-content {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        width: 80%;
        max-width: 800px;
        height: 80%;
        overflow-y: auto;
        position: relative;
      }

      .close-button {
        position: absolute;
        top: 10px;
        right: 10px;
        background: none;
        border: none;
        font-size: 20px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <h1>建筑模拟</h1>

    <div class="building">
      <!-- 1号楼：9层 -->
      <div class="building-label">党的建设</div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>

      <div class="floor"></div>
    </div>

    <div class="building">
      <!-- 2号楼：4层 -->
      <div class="building-label">人文关怀</div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor"></div>
    </div>

    <div class="building">
      <!-- 3号楼：7层 -->
      <div class="building-label">业务办理</div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor"></div>
    </div>

    <div class="building">
      <!-- 4号楼：2层 -->
      <div class="building-label">基础设施建设</div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor">
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
        <div class="window"></div>
      </div>
      <div class="floor"></div>
    </div>

    <div class="popup" id="popup">
      <div class="popup-content">
        <button class="close-button" onclick="closePopup()">×</button>
        <div id="popup-content"></div>
      </div>
    </div>
  </body>

  <script>
    const windows = document.querySelectorAll(".window");
    const popup = document.getElementById("popup");
    const popupContent = document.getElementById("popup-content");

    // 给所有的 window加点击事件
    for (let i = 0; i < windows.length; i++) {
      windows[i].addEventListener("click", function () {
        loadTableContent();
        showPopup();
      });
    }

    // 显示模态框
    function showPopup() {
      popup.style.display = "flex";
    }

    // 关闭模态框
    function closePopup() {
      popup.style.display = "none";
    }

    // 加载 table.html 的内容到模态框中
    function loadTableContent() {
      fetch("./table.html")
        .then(response => response.text())
        .then(data => {
          popupContent.innerHTML = data;
          // 初始化 table.html 中的模态框逻辑
          initTablePopup();
        })
        .catch(error => {
          popupContent.innerHTML = "<p>加载内容失败，请稍后再试。</p>";
        });
    }

    // 初始化 table.html 中的模态框逻辑
    function initTablePopup() {
      const tablePopup = document.getElementById("two-popup");
      const tablePopupContent = document.getElementById("two-popup-content");

      const items = document.querySelectorAll(".item");

      for (let i = 0; i < items.length; i++) {
        items[i].addEventListener("click", function () {
          loadDetailsContent();
          showTablePopup();
          highlightRow(this);
        });
      }

      function highlightRow(element) {
        // 移除所有高亮
        const items = document.querySelectorAll(".item");
        items.forEach(item => item.classList.remove("active"));

        // 添加当前高亮
        element.classList.add("active");
      }

      // 显示 table.html 中的模态框
      function showTablePopup() {
        tablePopup.style.display = "flex";
      }

      // 关闭 table.html 中的模态框
      function closeTablePopup() {
        tablePopup.style.display = "none";
      }

      // 加载 details.html 的内容到 table.html 的模态框中
      function loadDetailsContent() {
        fetch("./details.html")
          .then(response => response.text())
          .then(data => {
            tablePopupContent.innerHTML = data;
          })
          .catch(error => {
            tablePopupContent.innerHTML = "<p>加载内容失败，请稍后再试。</p>";
          });
      }

      // 添加关闭按钮事件
      const closeButton = document.querySelector(".two-close-button");
      closeButton.addEventListener("click", closeTablePopup);
    }
  </script>
</html>
